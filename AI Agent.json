{
  "name": "AI Agent",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -464,
        -48
      ],
      "id": "cd9b8671-7671-4dc7-8f62-37e321bdb2df",
      "name": "When chat message received",
      "webhookId": "8aada553-c264-4c7f-82f9-2cdc99fe225f"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "You are an AI Email Assistant integrated with n8n.\nYou ave access to two tools.\n1. Google Contacts Tool-to look up a person's email address using their name.\n2. Gmail Tool-to send an email.\nRules:\nAlways search for the recipient's email address using the Google Contacts Tool before attempting to send email.\nIf no email address is found, politely respond that the address is missing and do not attempt to send an email.\nOnce a valid email address is found, use the Gmail Tool to send the message.\nEnsure that only one email is sent per request.\nConfirm that the correct recipient and message are being used before sending."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -240,
        -48
      ],
      "id": "6424f8e7-0c51-488a-aea3-519001cd2d90",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -400,
        128
      ],
      "id": "f5b5cd16-9036-481e-8499-7ff8273695b1",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "2bPd0TQFmOPfVNCy",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -272,
        144
      ],
      "id": "c0f4ad82-a6d7-462d-b9e3-b1aab2e66e95",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "sendTo": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('To', ``, 'string') }}",
        "subject": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Subject', ``, 'string') }}",
        "message": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Message', ``, 'string') }}",
        "options": {}
      },
      "type": "n8n-nodes-base.gmailTool",
      "typeVersion": 2.1,
      "position": [
        -160,
        176
      ],
      "id": "cc47fbf0-6742-44fa-bb62-cc9968e78e3c",
      "name": "Send a message in Gmail",
      "webhookId": "7c1dd338-b82d-40ac-a030-6e37679b61ec",
      "credentials": {
        "gmailOAuth2": {
          "id": "hznobdkUdJnGeQlF",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "operation": "getAll",
        "limit": 1,
        "fields": [
          "emailAddresses",
          "names"
        ],
        "useQuery": true,
        "query": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Query', ``, 'string') }}"
      },
      "type": "n8n-nodes-base.googleContactsTool",
      "typeVersion": 1,
      "position": [
        0,
        176
      ],
      "id": "794a4fbb-0dd3-4ded-b22c-0343276fb38f",
      "name": "Get many contacts in Google Contacts",
      "credentials": {
        "googleContactsOAuth2Api": {
          "id": "hSi4WCSTRKiJrjzS",
          "name": "Google Contacts account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Send a message in Gmail": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Get many contacts in Google Contacts": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "1aab04c4-79a9-435f-8683-7b9098c50ebe",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "1c3f11c3fe5b5de49f874460d93950c284595880e69844612f90a6cd7737f088"
  },
  "id": "ssj8IhY2MZLZm923",
  "tags": []
}